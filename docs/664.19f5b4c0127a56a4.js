"use strict";(self.webpackChunkck=self.webpackChunkck||[]).push([[664],{2664:(F,p,s)=>{s.r(p),s.d(p,{AuthModule:()=>T});var n=s(9468);let m=(()=>{class e{constructor(t){this.viewcontainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.s_b))},e.\u0275dir=n.lG2({type:e,selectors:[["","appPlaceholder",""]]}),e})();var M=s(3923),u=s(5826),l=s(1076),h=s(6814),d=s(95);let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-loading-spinner"]],decls:13,vars:0,consts:[[1,"lds-spinner"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div")(6,"div")(7,"div")(8,"div")(9,"div")(10,"div")(11,"div")(12,"div"),n.qZA())},styles:['.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:_ngcontent-%COMP%_lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#0f044d}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes _ngcontent-%COMP%_lds-spinner{0%{opacity:1}to{opacity:0}}']}),e})();function y(e,r){}function O(e,r){1&e&&(n.TgZ(0,"div",6),n._UZ(1,"app-loading-spinner"),n.qZA())}function A(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"form",7,8),n.NdJ("ngSubmit",function(){n.CHM(t);const i=n.MAs(1),a=n.oxw();return n.KtG(a.onSubmit(i))}),n.TgZ(2,"div",9)(3,"label",10),n._uU(4,"E-Mail"),n.qZA(),n._UZ(5,"input",11),n.qZA(),n.TgZ(6,"div",9)(7,"label",12),n._uU(8,"Password"),n.qZA(),n._UZ(9,"input",13),n.qZA(),n.TgZ(10,"div",14)(11,"button",15),n._uU(12),n.qZA(),n._uU(13," | "),n.TgZ(14,"button",16),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.onSwitchMode())}),n._uU(15),n.qZA()()()}if(2&e){const t=n.MAs(1),o=n.oxw();n.xp6(11),n.Q6J("disabled",!t.valid),n.xp6(1),n.hij(" ",o.isLoginMode?"Login":"Sign Up"," "),n.xp6(3),n.hij(" Switch to ",o.isLoginMode?"Sign Up":"Login"," ")}}let S=(()=>{class e{constructor(t,o){this.authService=t,this.route=o,this.isLoginMode=!0,this.isLoading=!1}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){if(!t.valid)return;const o=t.value.email,i=t.value.password;let a;this.isLoading=!0,a=this.isLoginMode?this.authService.login(o,i):this.authService.signup(o,i),a.subscribe({next:c=>{this.isLoading=!1,this.route.navigate(["/menu"])},error:c=>{this.showErrorAlert(c),this.isLoading=!1}}),t.reset()}showErrorAlert(t){const o=this.alertHost.viewcontainerRef;o.clear();const i=o.createComponent(M.w);i.instance.message=t,this.closeSub=i.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),o.clear()})}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u.e),n.Y36(l.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-auth"]],viewQuery:function(t,o){if(1&t&&n.Gf(m,5),2&t){let i;n.iGM(i=n.CRH())&&(o.alertHost=i.first)}},decls:6,vars:2,consts:[[1,"container","m-5"],["appPlaceholder",""],[1,"row","m-5"],[1,"col-xs-12","col-md-6","col-md-offset-4","m-5"],["class","m-5",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"m-5"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],[1,"mt-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n.YNc(1,y,0,0,"ng-template",1),n.TgZ(2,"div",2)(3,"div",3),n.YNc(4,O,2,0,"div",4),n.YNc(5,A,16,3,"form",5),n.qZA()()()),2&t&&(n.xp6(4),n.Q6J("ngIf",o.isLoading),n.xp6(1),n.Q6J("ngIf",!o.isLoading))},dependencies:[h.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.wO,d.on,d.On,d.F,P,m],styles:[".container[_ngcontent-%COMP%]{margin:50px}"]}),e})();var g=s(9862),b=s(8180),x=s(7398),f=s(4829),Z=s(9360),v=s(8251);function C(e,r){return r?t=>t.pipe(C((o,i)=>(0,f.Xf)(e(o,i)).pipe((0,x.U)((a,c)=>r(o,a,i,c))))):(0,Z.e)((t,o)=>{let i=0,a=null,c=!1;t.subscribe((0,v.x)(o,_=>{a||(a=(0,v.x)(o,void 0,()=>{a=null,c&&o.complete()}),(0,f.Xf)(e(_,i++)).subscribe(a))},()=>{c=!0,!a&&o.complete()}))})}let L=(()=>{class e{constructor(t){this.authService=t}intercept(t,o){return this.authService.user.pipe((0,b.q)(1),C(i=>{if(!i)return o.handle(t);const a=t.clone({params:(new g.LE).set("auth",i.token)});return o.handle(a)}))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.e))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=s(3905);let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[{provide:g.TP,useClass:L,multi:!0}],imports:[h.ez,d.u5,l.Bz.forChild([{path:"",component:S}]),w.m,l.Bz]}),e})()}}]);